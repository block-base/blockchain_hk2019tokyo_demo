(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1368:function(e,t,n){"use strict";n.r(t);var r=n(357).a,o=n(39),c=n(94),d=n.n(c),y=n(90),l=n(1367),f=n(1361),m=n(1362),v=n(92),x=n(1363),component=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"pa-4"},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",{staticClass:"headline"},[e._v("プライベート証明書の発行")])]),e._v(" "),n("v-form",[n("v-text-field",{attrs:{label:"Name","prepend-icon":"account_box"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),n("v-text-field",{attrs:{label:"Select Content","prepend-icon":"attach_file"},on:{click:e.pickFile},model:{value:e.imageName,callback:function(t){e.imageName=t},expression:"imageName"}}),e._v(" "),n("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}}),e._v(" "),n("v-btn",{attrs:{color:"orange darken-2",dark:"",disabled:e.diabled},on:{click:e.upload}},[e._v("証明書の発行"),n("v-icon",{attrs:{right:""}},[e._v("lock")])],1)],1)],1),e._v(" "),e.imageUrl?n("img",{staticClass:"pa-5",attrs:{src:e.imageUrl,width:"100%"}}):e._e()],1)},[],!1,null,null,null);t.default=component.exports;d()(component,{VBtn:y.a,VCard:l.a,VCardTitle:f.a,VForm:m.a,VIcon:v.a,VTextField:x.a})},205:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},208:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},209:function(e,t){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},213:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},218:function(e,t,n){var r=n(240),o=n(264);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?o(e):t}},219:function(e,t,n){var r=n(319);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},226:function(e,t,n){n(205);var r=n(249);function o(t,n,c){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var base=r(e,t);if(base){var desc=Object.getOwnPropertyDescriptor(base,t);return desc.get?desc.get.call(n):desc.value}},o(t,n,c||t)}e.exports=o},240:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},249:function(e,t,n){var r=n(205);e.exports=function(object,e){for(;!Object.prototype.hasOwnProperty.call(object,e)&&null!==(object=r(object)););return object}},263:function(e,t,n){"use strict";n.r(t);t.default={call:0,certification:100001,studentPrivateKey:"0x61454a40702ecfa46e0d83488267dead6f0907bf5b27b1a53b4d090a0408eb4e",studentAddress:"0xf9242d747d35e4A3874901A30B49e67866Df41e3",studentPublicKey:"82d088deafe3b28ba544a5fa02eaf147e1677bd345d1c9280f85495f5f38f474d32fae3f88a6a3a409a3fc3bfcfd20fd510c6dd004da824413f2ab06bb3a3c8f",userIdentityAddress:"0xb6B23f917D1FF382754CD891F84788248D39a496",schoolIdentityAddress:"0x72439bba904bf5d4ce83e90a7e7466a74c3cedab",identityABI:[{inputs:[{name:"_owner",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!0,name:"value",type:"bytes32"}],name:"DataChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"contractAddress",type:"address"}],name:"ContractCreated",type:"event"},{constant:!0,inputs:[{name:"_key",type:"bytes32"}],name:"getData",outputs:[{name:"_value",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_key",type:"bytes32"},{name:"_value",type:"bytes32"}],name:"setData",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_operationType",type:"uint256"},{name:"_to",type:"address"},{name:"_value",type:"uint256"},{name:"_data",type:"bytes"}],name:"execute",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],claimHolderAddress:"0x6d101888b74715b7669a1faefb594ad9af282b04",claimHolderABI:[{constant:!0,inputs:[{name:"_key",type:"bytes32"}],name:"getKey",outputs:[{name:"_purposes",type:"uint256"},{name:"_keyType",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_key",type:"bytes32"},{name:"_purposes",type:"uint256"},{name:"_keyType",type:"uint256"}],name:"setKey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_key",type:"bytes32"}],name:"removeKey",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_key",type:"bytes32"},{name:"_purpose",type:"uint256"}],name:"keyHasPurpose",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"claimRequestId",type:"uint256"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimRequested",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signatureType",type:"uint256"},{indexed:!1,name:"signature",type:"bytes32"},{indexed:!1,name:"claim",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"claimId",type:"bytes32"},{indexed:!0,name:"claimType",type:"uint256"},{indexed:!1,name:"scheme",type:"uint256"},{indexed:!0,name:"issuer",type:"address"},{indexed:!1,name:"signature",type:"bytes"},{indexed:!1,name:"data",type:"bytes"},{indexed:!1,name:"uri",type:"string"}],name:"ClaimChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!0,name:"purposes",type:"uint256"},{indexed:!0,name:"keyType",type:"uint256"}],name:"KeySet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"key",type:"bytes32"},{indexed:!0,name:"purposes",type:"uint256"},{indexed:!0,name:"keyType",type:"uint256"}],name:"KeyRemoved",type:"event"},{constant:!1,inputs:[{name:"_claimType",type:"uint256"},{name:"_scheme",type:"uint256"},{name:"_issuer",type:"address"},{name:"_signature",type:"bytes"},{name:"_data",type:"bytes"},{name:"_uri",type:"string"}],name:"addClaim",outputs:[{name:"claimRequestId",type:"bytes32"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_claimId",type:"bytes32"}],name:"removeClaim",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_claimId",type:"bytes32"}],name:"getClaim",outputs:[{name:"claimType",type:"uint256"},{name:"scheme",type:"uint256"},{name:"issuer",type:"address"},{name:"signature",type:"bytes"},{name:"data",type:"bytes"},{name:"uri",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_claimType",type:"uint256"}],name:"getClaimIdsByType",outputs:[{name:"claimIds",type:"bytes32[]"}],payable:!1,stateMutability:"view",type:"function"}],claimVerifierAddress:"0xaa24902e67f1669882403530c198bf07c835a91f",claimVerifierABI:[{constant:!0,inputs:[{name:"_identity",type:"address"},{name:"hash",type:"bytes"},{name:"claimType",type:"uint256"}],name:"verify",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"sig",type:"bytes"},{name:"dataHash",type:"bytes32"}],name:"getRecoveredAddress",outputs:[{name:"addr",type:"address"}],payable:!1,stateMutability:"pure",type:"function"}],schoolOwnerAddress:"0x61a12c10676E7Ef993D21e3B1DA9A137406b9689",schoolOwnerPriveteKey:"0xa48de82caf25eb90d81cb42f3fcf788bce60d6d4d8b527c90b8306324b7bfd09"}},264:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},265:function(e,t,n){e.exports=n(320)},266:function(e,t){function n(e,t,n,r,o,c,d){try{var y=e[c](d),l=y.value}catch(e){return void n(e)}y.done?t(l):Promise.resolve(l).then(r,o)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(o,c){var d=e.apply(t,r);function y(e){n(d,o,c,y,l,"next",e)}function l(e){n(d,o,c,y,l,"throw",e)}y(void 0)})}}},289:function(e,t,n){n(205);var r=n(249),o=n(318);function c(e,t,n,d){return(c="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,c){var desc,base=r(e,t);if(base){if((desc=Object.getOwnPropertyDescriptor(base,t)).set)return desc.set.call(c,n),!0;if(!desc.writable)return!1}if(desc=Object.getOwnPropertyDescriptor(c,t)){if(!desc.writable)return!1;desc.value=n,Object.defineProperty(c,t,desc)}else o(c,t,n);return!0})(e,t,n,d)}e.exports=function(e,t,n,r,o){if(!c(e,t,n,r||e)&&o)throw new Error("failed to set property");return n}},317:function(e,t,n){"use strict";n(68);var r=n(13),o=n(263).default,c=new(n(443))("https://rinkeby.infura.io"),d={userIdentity:new c.eth.Contract(o.identityABI,o.userIdentityAddress),schoolIdentity:new c.eth.Contract(o.identityABI,o.schoolIdentityAddress),claimHolder:new c.eth.Contract(o.claimHolderABI,o.claimHolderAddress),claimVerifier:new c.eth.Contract(o.claimVerifierABI,o.claimVerifierAddress)},y={address:null},l=function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c.setProvider(t),e.next=3,c.eth.getAccounts();case 3:return n=e.sent,y.address=n[0],setInterval(Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.eth.getAccounts().then(function(e){y.address!=e[0]&&(y.address=e[0],location.reload())});case 1:case"end":return e.stop()}},e,this)})),100),e.abrupt("return",y);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),f={account:y,activate:l,contract:d,web3:c};t.a=f},318:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},319:function(e,t){function n(t,p){return e.exports=n=Object.setPrototypeOf||function(e,p){return e.__proto__=p,e},n(t,p)}e.exports=n},320:function(e,t,n){var g=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0,o=r&&g.regeneratorRuntime;if(g.regeneratorRuntime=void 0,e.exports=n(68),r)g.regeneratorRuntime=o;else try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=void 0}},323:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var i=0,t=new Array(e.length);i<e.length;i++)t[i]=e[i];return t}}},324:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},325:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},357:function(e,t,n){"use strict";(function(e){n(53),n(54),n(19),n(68);var r=n(13),o=n(676),c=n(381),d=n(317),y=n(263);t.a={data:function(){return{name:"浅田真理 ( "+y.default.studentAddress+" )",imageName:"",imageUrl:"",imageFile:"",ipfs:"",content:"",diabled:!0}},mounted:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.activate(web3.currentProvider);case 2:e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{pickFile:function(){this.$refs.image.click()},onFilePicked:function(t){var n=this,l=t.target.files;if(void 0!==l[0]){if(this.imageName=l[0].name,this.imageName.lastIndexOf(".")<=0)return;var f=new FileReader;f.readAsDataURL(l[0]),f.addEventListener("load",function(){n.imageUrl=f.result,n.imageFile=l[0];var t=new FileReader;t.addEventListener("load",Object(r.a)(regeneratorRuntime.mark(function r(){var data,l,f,m;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return data=e.from(t.result).toString("base64"),r.next=3,o.a.encryptWithPublicKey(y.default.studentPublicKey,data);case 3:return l=r.sent,console.log(l),r.next=7,c.a.add(JSON.stringify(l));case 7:f=r.sent,m="https://ipfs.io/ipfs/"+f,n.imageName=m,n.content=d.a.web3.utils.soliditySha3(data),n.ipfs=m,n.diabled=!1;case 13:case"end":return r.stop()}},r,this)}))),t.readAsArrayBuffer(n.imageFile)})}else this.imageName="",this.imageFile="",this.imageUrl=""},upload:function(){if(d.a.account.address==y.default.schoolOwnerAddress){var e=this.content,data=d.a.web3.utils.soliditySha3(y.default.userIdentityAddress,y.default.certification,e),t=d.a.web3.eth.accounts.sign(data,y.default.schoolOwnerPriveteKey).signature,n=d.a.contract.claimHolder.methods.addClaim(y.default.certification,0,y.default.schoolIdentityAddress,t,e,this.ipfs).encodeABI();d.a.contract.schoolIdentity.methods.execute(y.default.call,y.default.claimHolderAddress,0,n).send({from:d.a.account.address,gas:1e6}).on("transactionHash",function(t,n){var r=location.origin+"/#/verify?type="+y.default.certification+"&user="+y.default.userIdentityAddress+"&data="+e;console.log(r)})}else alert("Please import DHSG admin priv key: 0xa48de82caf25eb90d81cb42f3fcf788bce60d6d4d8b527c90b8306324b7bfd09")}}}}).call(this,n(197).Buffer)},360:function(e,t){},361:function(e,t){},367:function(e,t){},368:function(e,t){},381:function(e,t,n){"use strict";(function(e){n(68);var r=n(13),o=new(n(503))({host:"ipfs.infura.io",port:5001,protocol:"https"});function c(){}c.add=function(data){return new Promise(function(t){o.add(e.from(data)).then(function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t(n[0].hash);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.log(e)})})},t.a=c}).call(this,n(197).Buffer)},408:function(e,t){(function(t){e.exports=t}).call(this,{})},417:function(e,t){},448:function(e,t,n){var r=n(323),o=n(324),c=n(325);e.exports=function(e){return r(e)||o(e)||c()}},517:function(e,t){},518:function(e,t){},529:function(e,t){},530:function(e,t){},538:function(e,t){},539:function(e,t){},544:function(e,t){},598:function(e,t){},620:function(e,t){},648:function(e,t){}}]);